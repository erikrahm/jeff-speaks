{"ast":null,"code":"var _jsxFileName = \"/Users/erik.rahm/dev/jeff-speaks/src/components/CharacterBuilder.tsx\",\n    _s = $RefreshSig$();\n\nimport { pickBy, reduce } from \"lodash\";\nimport React, { useContext, useState, useEffect } from \"react\";\nimport styled from \"styled-components\";\nimport { AppContext } from \"../appState\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst CharacterContainer = styled.div`\n  background: #f1f1f1;\n  padding: 10px 15px 20px;\n  border-radius: 8px;\n  display: flex;\n  flex-direction: column;\n`;\n_c = CharacterContainer;\nconst CharacterName = styled.h4`\n  margin: 5px 0 0 0;\n`;\n_c2 = CharacterName;\nconst DialogueHeader = styled.div`\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  border-bottom: 1px solid darkgray;\n  margin-bottom: 10px;\n\n  div {\n    display: flex;\n    flex-direction: row;\n  }\n\n  pre {\n    color: darkgray;\n    border-right: 1px solid darkgray;\n    padding: 10px;\n    margin: 0;\n\n    &:last-of-type {\n      border: none;\n    }\n\n    &:first-of-type {\n      border-right: 1px solid darkgray;\n    }\n  }\n`;\n_c3 = DialogueHeader;\nconst DialogueWrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n  border: 1px solid darkgray;\n  margin-top: 20px;\n`;\n_c4 = DialogueWrapper;\nconst ResponsesWrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n  padding: 5px 20px 0;\n`;\n_c5 = ResponsesWrapper;\nconst ResponseContainer = styled.div`\n  margin-top: 10px;\n  border: 1px solid darkgray;\n\n  &:last-of-type {\n    margin-bottom: 20px;\n  }\n`;\n_c6 = ResponseContainer;\nconst True = styled.span`\n  color: green;\n`;\n_c7 = True;\nconst False = styled.span`\n  color: red;\n`;\n_c8 = False;\nconst DialogueParagraph = styled.p`\n  padding: 10px;\n  margin: 0;\n`;\n_c9 = DialogueParagraph;\nconst DialogueID = styled.pre`\n  cursor: text;\n`;\n_c10 = DialogueID;\nconst EditButton = styled.div`\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  padding: 0 10px;\n  text-transform: uppercase;\n  font-size: 10px;\n  letter-spacing: 1px;\n\n  &:hover {\n    color: #ffffff;\n    background: steelblue;\n  }\n`;\n_c11 = EditButton;\n\nconst CharacterBuilder = ({\n  character\n}) => {\n  _s();\n\n  const {\n    state,\n    dispatch\n  } = useContext(AppContext);\n  const [editing, updateEditing] = useState(\"\");\n  const [characterState, updateCharacterState] = useState();\n  useEffect(() => {\n    updateCharacterState(getDialogue());\n  }, [state]);\n\n  const getConditional = cID => state.conditions[cID] || {\n    name: \"NONE\",\n    met: true\n  };\n\n  const getResponses = dID => Object.values(pickBy(state.responses, res => res.parent === dID));\n\n  const getDialogue = () => reduce(state.dialogue, (results, dialogue, key) => {\n    if (dialogue.character === character.name) {\n      results = [...results, { ...dialogue,\n        responses: getResponses(dialogue.name).map(resp => ({ ...resp,\n          conditionMet: getConditional(resp.condition).met\n        }))\n      }];\n    }\n\n    return results;\n  }, []);\n\n  const editSection = section => {\n    updateEditing(section.name);\n  };\n\n  const saveDialogue = (ID, payload) => {\n    dispatch({\n      type: \"editDialogue\",\n      payload,\n      edit: ID\n    });\n    updateEditing(\"\");\n  };\n\n  const addDialogue = () => {};\n\n  const addResponse = () => {};\n\n  return characterState ? /*#__PURE__*/_jsxDEV(CharacterContainer, {\n    children: [/*#__PURE__*/_jsxDEV(CharacterName, {\n      children: character.displayName\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 7\n    }, this), characterState.map(dialogue => /*#__PURE__*/_jsxDEV(DialogueWrapper, {\n      id: dialogue.name,\n      children: [editing === dialogue.name ? /*#__PURE__*/_jsxDEV(DialogueBuilder, {\n        dialogue: dialogue\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 13\n      }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(DialogueHeader, {\n          children: [/*#__PURE__*/_jsxDEV(DialogueID, {\n            children: dialogue.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 175,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"pre\", {\n              children: dialogue.default && /*#__PURE__*/_jsxDEV(True, {\n                children: \"DEFAULT\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 177,\n                columnNumber: 45\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 177,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(EditButton, {\n              onClick: () => editSection(dialogue),\n              children: \"Edit\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 178,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 176,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(DialogueParagraph, {\n          children: [\"\\\"\", dialogue.dialogue, \"\\\"\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true), /*#__PURE__*/_jsxDEV(ResponsesWrapper, {\n        children: dialogue.responses.map(resp => /*#__PURE__*/_jsxDEV(ResponseContainer, {\n          id: resp.name,\n          children: editing === resp.name ? /*#__PURE__*/_jsxDEV(ResponseBuilder, {\n            response: resp\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 190,\n            columnNumber: 19\n          }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(DialogueHeader, {\n              children: [/*#__PURE__*/_jsxDEV(DialogueID, {\n                children: resp.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 194,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"pre\", {\n                children: /*#__PURE__*/_jsxDEV(\"a\", {\n                  href: `#${resp.next}`,\n                  children: [\"Next: \", resp.next]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 196,\n                  columnNumber: 25\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 195,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"pre\", {\n                  children: [\"Condition:\", \" \", resp.conditionMet ? /*#__PURE__*/_jsxDEV(True, {\n                    children: resp.condition\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 202,\n                    columnNumber: 29\n                  }, this) : /*#__PURE__*/_jsxDEV(False, {\n                    children: resp.condition\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 204,\n                    columnNumber: 29\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 199,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(EditButton, {\n                  onClick: () => editSection(resp),\n                  children: \"Edit\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 207,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 198,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 193,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(DialogueParagraph, {\n              children: [\"\\\"[\", resp.category, \"] \", resp.dialogue, \"\\\"\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 212,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 9\n    }, this))]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 166,\n    columnNumber: 5\n  }, this) : null;\n};\n\n_s(CharacterBuilder, \"UudrQNgrSFfSfBex0SnwcyJXU4I=\");\n\n_c12 = CharacterBuilder;\n\nconst DialogueBuilder = ({\n  dialogue\n}) => {\n  console.log(\"hey\");\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(DialogueHeader, {\n      children: [/*#__PURE__*/_jsxDEV(DialogueID, {\n        children: dialogue.name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"pre\", {\n          children: dialogue.default && /*#__PURE__*/_jsxDEV(True, {\n            children: \"DEFAULT\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 238,\n            columnNumber: 37\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 238,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(EditButton, {\n          children: \"save\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 239,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(DialogueParagraph, {\n      children: [\"\\\"\", dialogue.dialogue, \"\\\"\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 234,\n    columnNumber: 5\n  }, this);\n};\n\n_c13 = DialogueBuilder;\n\nconst ResponseBuilder = ({\n  response\n}) => {\n  console.log(\"hey\");\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"hey\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 256,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 255,\n    columnNumber: 5\n  }, this);\n};\n\n_c14 = ResponseBuilder;\nexport default CharacterBuilder;\n\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9, _c10, _c11, _c12, _c13, _c14;\n\n$RefreshReg$(_c, \"CharacterContainer\");\n$RefreshReg$(_c2, \"CharacterName\");\n$RefreshReg$(_c3, \"DialogueHeader\");\n$RefreshReg$(_c4, \"DialogueWrapper\");\n$RefreshReg$(_c5, \"ResponsesWrapper\");\n$RefreshReg$(_c6, \"ResponseContainer\");\n$RefreshReg$(_c7, \"True\");\n$RefreshReg$(_c8, \"False\");\n$RefreshReg$(_c9, \"DialogueParagraph\");\n$RefreshReg$(_c10, \"DialogueID\");\n$RefreshReg$(_c11, \"EditButton\");\n$RefreshReg$(_c12, \"CharacterBuilder\");\n$RefreshReg$(_c13, \"DialogueBuilder\");\n$RefreshReg$(_c14, \"ResponseBuilder\");","map":{"version":3,"sources":["/Users/erik.rahm/dev/jeff-speaks/src/components/CharacterBuilder.tsx"],"names":["pickBy","reduce","React","useContext","useState","useEffect","styled","AppContext","CharacterContainer","div","CharacterName","h4","DialogueHeader","DialogueWrapper","ResponsesWrapper","ResponseContainer","True","span","False","DialogueParagraph","p","DialogueID","pre","EditButton","CharacterBuilder","character","state","dispatch","editing","updateEditing","characterState","updateCharacterState","getDialogue","getConditional","cID","conditions","name","met","getResponses","dID","Object","values","responses","res","parent","dialogue","results","key","map","resp","conditionMet","condition","editSection","section","saveDialogue","ID","payload","type","edit","addDialogue","addResponse","displayName","default","next","category","DialogueBuilder","console","log","ResponseBuilder","response"],"mappings":"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","sourcesContent":["import { pickBy, reduce } from \"lodash\";\nimport React, { useContext, useState, useEffect } from \"react\";\nimport styled from \"styled-components\";\n\nimport { AppContext } from \"../appState\";\n\nconst CharacterContainer = styled.div`\n  background: #f1f1f1;\n  padding: 10px 15px 20px;\n  border-radius: 8px;\n  display: flex;\n  flex-direction: column;\n`;\n\nconst CharacterName = styled.h4`\n  margin: 5px 0 0 0;\n`;\n\nconst DialogueHeader = styled.div`\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  border-bottom: 1px solid darkgray;\n  margin-bottom: 10px;\n\n  div {\n    display: flex;\n    flex-direction: row;\n  }\n\n  pre {\n    color: darkgray;\n    border-right: 1px solid darkgray;\n    padding: 10px;\n    margin: 0;\n\n    &:last-of-type {\n      border: none;\n    }\n\n    &:first-of-type {\n      border-right: 1px solid darkgray;\n    }\n  }\n`;\n\nconst DialogueWrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n  border: 1px solid darkgray;\n  margin-top: 20px;\n`;\n\nconst ResponsesWrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n  padding: 5px 20px 0;\n`;\n\nconst ResponseContainer = styled.div`\n  margin-top: 10px;\n  border: 1px solid darkgray;\n\n  &:last-of-type {\n    margin-bottom: 20px;\n  }\n`;\n\nconst True = styled.span`\n  color: green;\n`;\n\nconst False = styled.span`\n  color: red;\n`;\n\nconst DialogueParagraph = styled.p`\n  padding: 10px;\n  margin: 0;\n`;\n\nconst DialogueID = styled.pre`\n  cursor: text;\n`;\n\nconst EditButton = styled.div`\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  padding: 0 10px;\n  text-transform: uppercase;\n  font-size: 10px;\n  letter-spacing: 1px;\n\n  &:hover {\n    color: #ffffff;\n    background: steelblue;\n  }\n`;\n\ninterface ResponseRender extends DialogueResponse {\n  conditionMet: boolean;\n}\n\ninterface DialogueRender extends Dialogue {\n  responses: ResponseRender[];\n}\n\ninterface CharacterProps {\n  character: Character;\n}\n\nconst CharacterBuilder: React.FC<CharacterProps> = ({ character }) => {\n  const { state, dispatch } = useContext(AppContext);\n  const [editing, updateEditing] = useState(\"\");\n  const [characterState, updateCharacterState] = useState<DialogueRender[]>();\n\n  useEffect(() => {\n    updateCharacterState(getDialogue());\n  }, [state]);\n\n  const getConditional = (cID: string) =>\n    state.conditions[cID] || {\n      name: \"NONE\",\n      met: true,\n    };\n\n  const getResponses = (dID: string): DialogueResponse[] =>\n    Object.values(pickBy(state.responses, (res) => res.parent === dID));\n\n  const getDialogue = () =>\n    reduce(\n      state.dialogue,\n      (results, dialogue, key) => {\n        if (dialogue.character === character.name) {\n          results = [\n            ...results,\n            {\n              ...dialogue,\n              responses: getResponses(dialogue.name).map((resp) => ({\n                ...resp,\n                conditionMet: getConditional(resp.condition).met,\n              })),\n            },\n          ];\n        }\n        return results;\n      },\n      [] as unknown as DialogueRender[]\n    );\n\n  const editSection = (section: any) => {\n    updateEditing(section.name);\n  };\n\n  const saveDialogue = (ID: string, payload: Dialogue) => {\n    dispatch({ type: \"editDialogue\", payload, edit: ID });\n    updateEditing(\"\");\n  };\n\n  const addDialogue = () => {};\n\n  const addResponse = () => {};\n\n  return characterState ? (\n    <CharacterContainer>\n      <CharacterName>{character.displayName}</CharacterName>\n      {characterState.map((dialogue) => (\n        <DialogueWrapper id={dialogue.name}>\n          {editing === dialogue.name ? (\n            <DialogueBuilder dialogue={dialogue} />\n          ) : (\n            <>\n              <DialogueHeader>\n                <DialogueID>{dialogue.name}</DialogueID>\n                <div>\n                  <pre>{dialogue.default && <True>DEFAULT</True>}</pre>\n                  <EditButton onClick={() => editSection(dialogue)}>\n                    Edit\n                  </EditButton>\n                </div>\n              </DialogueHeader>\n              <DialogueParagraph>\"{dialogue.dialogue}\"</DialogueParagraph>\n            </>\n          )}\n          <ResponsesWrapper>\n            {dialogue.responses.map((resp) => (\n              <ResponseContainer id={resp.name}>\n                {editing === resp.name ? (\n                  <ResponseBuilder response={resp} />\n                ) : (\n                  <>\n                    <DialogueHeader>\n                      <DialogueID>{resp.name}</DialogueID>\n                      <pre>\n                        <a href={`#${resp.next}`}>Next: {resp.next}</a>\n                      </pre>\n                      <div>\n                        <pre>\n                          Condition:{\" \"}\n                          {resp.conditionMet ? (\n                            <True>{resp.condition}</True>\n                          ) : (\n                            <False>{resp.condition}</False>\n                          )}\n                        </pre>\n                        <EditButton onClick={() => editSection(resp)}>\n                          Edit\n                        </EditButton>\n                      </div>\n                    </DialogueHeader>\n                    <DialogueParagraph>\n                      \"[{resp.category}] {resp.dialogue}\"\n                    </DialogueParagraph>\n                  </>\n                )}\n              </ResponseContainer>\n            ))}\n          </ResponsesWrapper>\n        </DialogueWrapper>\n      ))}\n    </CharacterContainer>\n  ) : null;\n};\n\ninterface DialogueBuilderProps {\n  dialogue: Dialogue;\n}\n\nconst DialogueBuilder: React.FC<DialogueBuilderProps> = ({ dialogue }) => {\n  console.log(\"hey\");\n\n  return (\n    <div>\n      <DialogueHeader>\n        <DialogueID>{dialogue.name}</DialogueID>\n        <div>\n          <pre>{dialogue.default && <True>DEFAULT</True>}</pre>\n          <EditButton>save</EditButton>\n        </div>\n      </DialogueHeader>\n      <DialogueParagraph>\"{dialogue.dialogue}\"</DialogueParagraph>\n    </div>\n  );\n};\n\ninterface ResponseBuilderProps {\n  response: DialogueResponse;\n}\n\nconst ResponseBuilder: React.FC<ResponseBuilderProps> = ({ response }) => {\n  console.log(\"hey\");\n\n  return (\n    <div>\n      <div>hey</div>\n    </div>\n  );\n};\n\nexport default CharacterBuilder;\n"]},"metadata":{},"sourceType":"module"}